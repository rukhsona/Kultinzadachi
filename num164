// Проверяет, является ли матрица "магическим" квадратом 
#include <stdio.h> 
#include <conio.h> 
#define SZ 5 // максимальный размер матрицы 
void main О 
{ 
int a[SZ][SZ]; // матрица 
int n; // размер проверяемой матрицы 
int ok; // матрица - "магический" квадрат 
int i,j; // индексы массива 
int sum; // сумма эл-тов главной диагонали 
int temp; // сумма элементов текущей строки, 
// столбца или второй диагонали матрицы 
printf ("*** МАГР1ЧЕСКШ КВАДРАТ ***\п") ; 
printf("\пВведите размер матрицы (3..%i) -> ", SZ); 
scanf{"%i", &n); 
printf("Введите строки матрицыХп"); 
printf("После ввода строки, %i целых чисел, ", п); 
printf("нажимайте <Enter>\n"); 
for (i =0 ; i < n; i++) 
{ 
printf("->"); 
for (j = 0; j < n; j++) 
scanf("%i", &a[i][j]); 
} 
ok = 1; // пусть матрица - "магический" квадрат 
// вычислим сумму элементов главной диагонали 
sum = 0; 
for (i = 0; i < n; i++) 
sum += a[i][i]; 
// вычисляем суммы по строкам 
i = 0; 
do { 
temp =0 ; // сумма эл-тов текущей строки 
for (j = 0; j < n; j++) 
temp += a[i][j]; 
i f (temp != sum) ok = 0; 
i++; 
} whil e (ok && i < n); 
i f ( ok ) 
{ 
// здесь сумма элементов каждой строки 
// равна сумме элементов главной диагонали 
// вычисляем суммы по столбцам 
j = 0; 
do { 
tertp = 0; // сумма зл-тов текущего столбца 
for (i =0 ; i < n; i++) 
temp += a[i][j]; 
if (temp != sum) ok = 0; 
j++; 
} while (ok && i < n); 
} 
if ( ok ) { 
// здесь сумма элементов каждой строки 
// равна сумме элементов каждого столбца и 
// сумме элементов главной диагонали. 
// Вычислим сумму элементов второй 
// главной диагонали 
temp = 0; 
1 - п - 1; 
for (j = 0; j < n; j++) 
temp += a[i—] [j] ; 
if (temp != sum) ok = 0; 
} 
printf("Введенная матрица ") ; 
if ( !ok ) 
printf("не ") ; 
printf("является \"магическим\"квадратом.\n"); 
printf("\пДля завершения нажмите <Enter>"); 
getch();
}
